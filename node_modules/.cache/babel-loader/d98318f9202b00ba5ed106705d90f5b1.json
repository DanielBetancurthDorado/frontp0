{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/danielbetancurth/Desktop/proyecto0cloud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danielbetancurth/Desktop/proyecto0cloud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danielbetancurth/Desktop/proyecto0cloud/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{Context}from\"../hooks/context.js\";import axios from\"axios\";import{Card,Button}from\"react-bootstrap\";import DatePicker from\"react-datepicker\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"react-datepicker/dist/react-datepicker.css\";var Principal=function Principal(){var _useContext=useContext(Context),_useContext2=_slicedToArray(_useContext,2),context=_useContext2[0],setContext=_useContext2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),eventos=_useState2[0],setEventos=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),detail=_useState6[0],setDetail=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),post=_useState8[0],setPost=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),eventoActual=_useState10[0],setEventoActual=_useState10[1];var _useState11=useState(new Date()),_useState12=_slicedToArray(_useState11,2),startDate=_useState12[0],setStartDate=_useState12[1];var _useState13=useState(new Date()),_useState14=_slicedToArray(_useState13,2),endDate=_useState14[0],setEndDate=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),nombre=_useState16[0],setNombre=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),categoria=_useState18[0],setCategoria=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),lugar=_useState20[0],setLugar=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),direccion=_useState22[0],setDireccion=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),tipo=_useState24[0],setTipo=_useState24[1];var _useState25=useState({}),_useState26=_slicedToArray(_useState25,2),infoDetalle=_useState26[0],setInfoDetalle=_useState26[1];var user=context;useEffect(function(){axios.get(\"/usuarios/\".concat(user.id,\"/eventos\"),{headers:{Authorization:user.token}}).then(function(res){setEventos(res.data);}).catch(function(error){console.error(error);});},[eventos]);//hay que colocar eventos en []\nvar eliminar=function eliminar(idEvento,idCreador){axios.delete(\"/usuarios/\"+idCreador+\"/eventos/\"+idEvento);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return axios.put(\"/usuarios/\"+user.id+\"/eventos/\"+eventoActual,{nombre:nombre,categoria:categoria,lugar:lugar,direccion:direccion,fechaInicio:startDate,fechaFin:endDate,tipo:tipo},{headers:{Authorization:user.token}});case 3:response=_context.sent;if(response.status===200){alert(\"Se actualizó el evento correctamente\");}if(!response.status){alert(\"No se pudo actualizar el evento, revise el valor de los parametros\");}setEdit(false);setEventoActual(0);case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var editar=function editar(idEvento){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Editando evento\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre\",children:\"Nombre: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nombre,placeholder:\"Ingrese el nuevo nombre del evento\",onChange:function onChange(_ref2){var target=_ref2.target;return setNombre(target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"direccion\",children:\"Direccion: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:direccion,placeholder:\"Ingrese la nueva direccion del evento\",onChange:function onChange(_ref3){var target=_ref3.target;return setDireccion(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"categoria\",children:\"Categoria: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categoria,placeholder:\"Ingrese la nueva categoria del evento\",onChange:function onChange(_ref4){var target=_ref4.target;return setCategoria(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lugar\",children:\"Lugar: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:lugar,placeholder:\"Ingrese le nuevo lugar del evento\",onChange:function onChange(_ref5){var target=_ref5.target;return setLugar(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fechaInicio\",children:\"Fecha Inicio: \"}),/*#__PURE__*/_jsx(DatePicker,{selected:startDate,format:\"yyyy-mm-dd hh:mm:ss\",onChange:function onChange(date){setStartDate(date);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"FechaFin: \"}),/*#__PURE__*/_jsx(DatePicker,{selected:endDate,format:\"yyyy-mm-dd hh:mm:ss\",onChange:function onChange(date){setEndDate(date);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tipo\",children:\"Tipo: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tipo,placeholder:\"Ingrese el tipo del evento\",onChange:function onChange(_ref6){var target=_ref6.target;return setTipo(target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Editar evento\"})]})]});};var handleSubmitPost=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.post(\"/usuarios/\"+user.id+\"/eventos\",{nombre:nombre,categoria:categoria,lugar:lugar,direccion:direccion,fechaInicio:startDate,fechaFin:endDate,tipo:tipo},{headers:{Authorization:user.token}});case 3:response=_context2.sent;if(response.status===200){alert(\"Se creo el evento correctamente\");}if(!response.status){alert(\"No se pudo actualizar el evento, revise el valor de los parametros\");}setPost(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmitPost(_x2){return _ref7.apply(this,arguments);};}();var agregar=function agregar(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Agregando evento\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitPost,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre\",children:\"Nombre: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nombre,placeholder:\"Ingrese el nuevo nombre del evento\",onChange:function onChange(_ref8){var target=_ref8.target;return setNombre(target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"direccion\",children:\"Direccion: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:direccion,placeholder:\"Ingrese la nueva direccion del evento\",onChange:function onChange(_ref9){var target=_ref9.target;return setDireccion(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"categoria\",children:\"Categoria: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categoria,placeholder:\"Ingrese la nueva categoria del evento\",onChange:function onChange(_ref10){var target=_ref10.target;return setCategoria(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lugar\",children:\"Lugar: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:lugar,placeholder:\"Ingrese le nuevo lugar del evento\",onChange:function onChange(_ref11){var target=_ref11.target;return setLugar(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fechaInicio\",children:\"Fecha Inicio: \"}),/*#__PURE__*/_jsx(DatePicker,{selected:startDate,format:\"yyyy-mm-dd hh:mm:ss\",onChange:function onChange(date){setStartDate(date);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"FechaFin: \"}),/*#__PURE__*/_jsx(DatePicker,{selected:endDate,format:\"yyyy-mm-dd hh:mm:ss\",onChange:function onChange(date){setEndDate(date);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tipo\",children:\"Tipo: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tipo,placeholder:\"Ingrese el tipo del evento\",onChange:function onChange(_ref12){var target=_ref12.target;return setTipo(target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Agregar evento\"})]})]});};var verDetalle=function verDetalle(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:infoDetalle.nombre}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary\",children:\"Categoria:\"}),/*#__PURE__*/_jsx(\"h3\",{children:infoDetalle.categoria}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary\",children:\"Direcci\\xF3n:\"}),/*#__PURE__*/_jsx(\"h3\",{children:infoDetalle.direccion}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary\",children:\"Fecha de inicio:\"}),/*#__PURE__*/_jsx(\"h3\",{children:infoDetalle.fechaInicio}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary\",children:\"Fecha de termino:\"}),/*#__PURE__*/_jsx(\"h3\",{children:infoDetalle.fechaFin}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary\",children:\"Tipo de evento:\"}),/*#__PURE__*/_jsx(\"h3\",{children:infoDetalle.tipo})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setPost(true);setDetail(false);setEdit(false);},children:\"Agregar un evento\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:eventos.map(function(evento,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{as:\"h5\",children:evento.nombre}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:evento.categoria}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"Fechas: \",evento.fechaInicio,\" - \",evento.fechaFin,\" \"]}),/*#__PURE__*/_jsx(Card.Link,{onClick:function onClick(){setPost(false);setDetail(true);setEdit(false);setEventoActual(evento.id);axios.get(\"/usuarios/\".concat(user.id,\"/eventos/\").concat(evento.id),{headers:{Authorization:user.token}}).then(function(response){setInfoDetalle(response.data);});},children:\"Detalle\"}),/*#__PURE__*/_jsx(Card.Link,{onClick:function onClick(){setPost(false);setDetail(false);setEdit(true);setEventoActual(evento.id);},children:\"Editar evento\"}),/*#__PURE__*/_jsx(Card.Link,{onClick:function onClick(){eliminar(evento.id,evento.creador_id);setPost(false);setDetail(false);setEdit(false);},children:\"Eliminar evento\"})]})]})},index+1);})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[\" \",edit?editar(eventoActual):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[\" \",post?agregar():null]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:detail?verDetalle():null})]})})]});};export default Principal;","map":{"version":3,"sources":["/Users/danielbetancurth/Desktop/proyecto0cloud/src/components/principal.js"],"names":["React","useContext","useEffect","useState","Context","axios","Card","Button","DatePicker","Principal","context","setContext","eventos","setEventos","edit","setEdit","detail","setDetail","post","setPost","eventoActual","setEventoActual","Date","startDate","setStartDate","endDate","setEndDate","nombre","setNombre","categoria","setCategoria","lugar","setLugar","direccion","setDireccion","tipo","setTipo","infoDetalle","setInfoDetalle","user","get","id","headers","Authorization","token","then","res","data","catch","error","console","eliminar","idEvento","idCreador","delete","handleSubmit","e","preventDefault","put","fechaInicio","fechaFin","response","status","alert","editar","target","value","date","handleSubmitPost","agregar","verDetalle","map","evento","index","creador_id"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { Context } from \"../hooks/context.js\";\nimport axios from \"axios\";\nimport { Card, Button } from \"react-bootstrap\";\nimport DatePicker from \"react-datepicker\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst Principal = () => {\n  const [context, setContext] = useContext(Context);\n  const [eventos, setEventos] = useState([]);\n  const [edit, setEdit] = useState(false);\n  const [detail, setDetail] = useState(false);\n  const [post, setPost] = useState(false);\n  const [eventoActual, setEventoActual] = useState(0);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [nombre, setNombre] = useState(\"\");\n  const [categoria, setCategoria] = useState(\"\");\n  const [lugar, setLugar] = useState(\"\");\n  const [direccion, setDireccion] = useState(\"\");\n  const [tipo, setTipo] = useState(\"\");\n  const [infoDetalle, setInfoDetalle] = useState({});\n\n  const user = context;\n\n  useEffect(() => {\n    axios\n      .get(`/usuarios/${user.id}/eventos`, {\n        headers: {\n          Authorization: user.token,\n        },\n      })\n      .then((res) => {\n        setEventos(res.data);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }, [eventos]); //hay que colocar eventos en []\n\n  const eliminar = (idEvento, idCreador) => {\n    axios.delete(\"/usuarios/\" + idCreador + \"/eventos/\" + idEvento);\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const response = await axios.put(\n      \"/usuarios/\" + user.id + \"/eventos/\" + eventoActual,\n      {\n        nombre: nombre,\n        categoria: categoria,\n        lugar: lugar,\n        direccion: direccion,\n        fechaInicio: startDate,\n        fechaFin: endDate,\n        tipo: tipo,\n      },\n      {\n        headers: {\n          Authorization: user.token,\n        },\n      }\n    );\n    if (response.status === 200) {\n      alert(\"Se actualizó el evento correctamente\");\n    }\n    if (!response.status) {\n      alert(\n        \"No se pudo actualizar el evento, revise el valor de los parametros\"\n      );\n    }\n    setEdit(false);\n    setEventoActual(0);\n  };\n  const editar = (idEvento) => {\n    return (\n      <div>\n        <h2>Editando evento</h2>\n        <form onSubmit={handleSubmit}>\n          <label htmlFor=\"nombre\">Nombre: </label>\n          <input\n            type=\"text\"\n            value={nombre}\n            placeholder=\"Ingrese el nuevo nombre del evento\"\n            onChange={({ target }) => setNombre(target.value)}\n          />\n          <div>\n            <label htmlFor=\"direccion\">Direccion: </label>\n            <input\n              type=\"text\"\n              value={direccion}\n              placeholder=\"Ingrese la nueva direccion del evento\"\n              onChange={({ target }) => setDireccion(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"categoria\">Categoria: </label>\n            <input\n              type=\"text\"\n              value={categoria}\n              placeholder=\"Ingrese la nueva categoria del evento\"\n              onChange={({ target }) => setCategoria(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"lugar\">Lugar: </label>\n            <input\n              type=\"text\"\n              value={lugar}\n              placeholder=\"Ingrese le nuevo lugar del evento\"\n              onChange={({ target }) => setLugar(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"fechaInicio\">Fecha Inicio: </label>\n            <DatePicker\n              selected={startDate}\n              format={\"yyyy-mm-dd hh:mm:ss\"}\n              onChange={(date) => {\n                setStartDate(date);\n              }}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"password\">FechaFin: </label>\n            <DatePicker\n              selected={endDate}\n              format={\"yyyy-mm-dd hh:mm:ss\"}\n              onChange={(date) => {\n                setEndDate(date);\n              }}\n            />{\" \"}\n          </div>\n          <div>\n            <label htmlFor=\"tipo\">Tipo: </label>\n            <input\n              type=\"text\"\n              value={tipo}\n              placeholder=\"Ingrese el tipo del evento\"\n              onChange={({ target }) => setTipo(target.value)}\n            />\n          </div>\n          <button type=\"submit\">Editar evento</button>\n        </form>\n      </div>\n    );\n  };\n  const handleSubmitPost = async (e) => {\n    e.preventDefault();\n    const response = await axios.post(\n      \"/usuarios/\" + user.id + \"/eventos\",\n      {\n        nombre: nombre,\n        categoria: categoria,\n        lugar: lugar,\n        direccion: direccion,\n        fechaInicio: startDate,\n        fechaFin: endDate,\n        tipo: tipo,\n      },\n      {\n        headers: {\n          Authorization: user.token,\n        },\n      }\n    );\n    if (response.status === 200) {\n      alert(\"Se creo el evento correctamente\");\n    }\n    if (!response.status) {\n      alert(\n        \"No se pudo actualizar el evento, revise el valor de los parametros\"\n      );\n    }\n    setPost(false);\n  };\n  const agregar = () => {\n    return (\n      <div>\n        <h2>Agregando evento</h2>\n        <form onSubmit={handleSubmitPost}>\n          <label htmlFor=\"nombre\">Nombre: </label>\n          <input\n            type=\"text\"\n            value={nombre}\n            placeholder=\"Ingrese el nuevo nombre del evento\"\n            onChange={({ target }) => setNombre(target.value)}\n          />\n          <div>\n            <label htmlFor=\"direccion\">Direccion: </label>\n            <input\n              type=\"text\"\n              value={direccion}\n              placeholder=\"Ingrese la nueva direccion del evento\"\n              onChange={({ target }) => setDireccion(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"categoria\">Categoria: </label>\n            <input\n              type=\"text\"\n              value={categoria}\n              placeholder=\"Ingrese la nueva categoria del evento\"\n              onChange={({ target }) => setCategoria(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"lugar\">Lugar: </label>\n            <input\n              type=\"text\"\n              value={lugar}\n              placeholder=\"Ingrese le nuevo lugar del evento\"\n              onChange={({ target }) => setLugar(target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"fechaInicio\">Fecha Inicio: </label>\n            <DatePicker\n              selected={startDate}\n              format={\"yyyy-mm-dd hh:mm:ss\"}\n              onChange={(date) => {\n                setStartDate(date);\n              }}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"password\">FechaFin: </label>\n            <DatePicker\n              selected={endDate}\n              format={\"yyyy-mm-dd hh:mm:ss\"}\n              onChange={(date) => {\n                setEndDate(date);\n              }}\n            />{\" \"}\n          </div>\n          <div>\n            <label htmlFor=\"tipo\">Tipo: </label>\n            <input\n              type=\"text\"\n              value={tipo}\n              placeholder=\"Ingrese el tipo del evento\"\n              onChange={({ target }) => setTipo(target.value)}\n            />\n          </div>\n          <button type=\"submit\">Agregar evento</button>\n        </form>\n      </div>\n    );\n  };\n  const verDetalle = () => {\n    return (\n      <div>\n        <h1>{infoDetalle.nombre}</h1>\n        <h2 className=\"text-primary\">Categoria:</h2>\n        <h3>{infoDetalle.categoria}</h3>\n        <h2 className=\"text-primary\">Dirección:</h2>\n        <h3>{infoDetalle.direccion}</h3>\n        <h2 className=\"text-primary\">Fecha de inicio:</h2>\n        <h3>{infoDetalle.fechaInicio}</h3>\n        <h2 className=\"text-primary\">Fecha de termino:</h2>\n        <h3>{infoDetalle.fechaFin}</h3>\n        <h2 className=\"text-primary\">Tipo de evento:</h2>\n        <h3>{infoDetalle.tipo}</h3>\n      </div>\n    );\n  };\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          setPost(true);\n          setDetail(false);\n          setEdit(false);\n        }}\n      >\n        Agregar un evento\n      </Button>\n      <div className=\"row\">\n        {eventos.map((evento, index) => (\n          <div key={index + 1}>\n            <Card>\n              <Card.Header as=\"h5\">{evento.nombre}</Card.Header>\n              <Card.Body>\n                <Card.Title>{evento.categoria}</Card.Title>\n                <Card.Text>\n                  Fechas: {evento.fechaInicio} - {evento.fechaFin}{\" \"}\n                </Card.Text>\n                <Card.Link\n                  onClick={() => {\n                    setPost(false);\n                    setDetail(true);\n                    setEdit(false);\n                    setEventoActual(evento.id);\n\n                    axios\n                      .get(`/usuarios/${user.id}/eventos/${evento.id}`, {\n                        headers: {\n                          Authorization: user.token,\n                        },\n                      })\n                      .then((response) => {\n                        setInfoDetalle(response.data);\n                      });\n                  }}\n                >\n                  Detalle\n                </Card.Link>\n                <Card.Link\n                  onClick={() => {\n                    setPost(false);\n                    setDetail(false);\n                    setEdit(true);\n                    setEventoActual(evento.id);\n                  }}\n                >\n                  Editar evento\n                </Card.Link>\n                <Card.Link\n                  onClick={() => {\n                    eliminar(evento.id, evento.creador_id);\n                    setPost(false);\n                    setDetail(false);\n                    setEdit(false);\n                  }}\n                >\n                  Eliminar evento\n                </Card.Link>\n              </Card.Body>\n            </Card>\n          </div>\n        ))}\n      </div>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-4\"> {edit ? editar(eventoActual) : null}</div>\n          <div className=\"col-4\"> {post ? agregar() : null}</div>\n          <div className=\"col-4\">{detail ? verDetalle() : null}</div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Principal;\n"]},"metadata":{},"sourceType":"module"}